"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "wrapRootElement", {
  enumerable: true,
  get: function get() {
    return _wrapRootElement.wrapRootElement;
  }
});
exports.onRouteUpdate = void 0;

var _utils = require("./utils");

var _wrapRootElement = require("./wrapRootElement");

var isTwttrScriptAdded = false;
var twttrClassNames = [".twitter-tweet", ".twitter-timeline", ".twitter-follow-button", ".twitter-mention-button", ".twitter-hashtag-button"].join(",");
var twttrEmbedScript = "\n!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+\"://platform.twitter.com/widgets.js\";fjs.parentNode.insertBefore(js,fjs);}}(document,\"script\",\"twitter-wjs\")\n";

var twttrLoad = function twttrLoad() {
  if (typeof window.twttr !== "undefined" && window.twttr.widgets && typeof window.twttr.widgets.load === "function") {
    window.twttr.widgets.load(document.getElementById("___gatsby"));
  }
};

var isInstgrmScriptAdded = false;
var instgrmClassNames = [".instagram-media", ".instagram-media-rendered"].join(",");
var instgrmEmbedUrl = "https://www.instagram.com/embed.js";

var instgrmProcess = function instgrmProcess() {
  if (typeof window.instgrm !== "undefined" && window.instgrm.Embeds && typeof window.instgrm.Embeds.process === "function") {
    window.instgrm.Embeds.process();
  }
};

var isFlickrScriptAdded = false;
var flickrEmbedClassNames = [".flickr-embed-mdx"].join(",");
var flickrEmbedUrl = "https://embedr.flickr.com/assets/client-code.js";
var isPinterestScriptAdded = false;
var pinterestEmbedClassNames = [".pinterest-pin", ".pinterest-board", ".pinterest-follow-button"].join(",");
var pinterestEmbedScript = "!function(a,b,c){var d,e,f;d=\"PIN_\"+~~((new Date).getTime()/864e5),a[d]?a[d]+=1:(a[d]=1,a.setTimeout(function(){e=b.getElementsByTagName(\"SCRIPT\")[0],f=b.createElement(\"SCRIPT\"),f.type=\"text/javascript\",f.async=!0,f.src=c.mainUrl+\"?\"+Math.random(),e.parentNode.insertBefore(f,e)},10))}(window,document,{mainUrl:\"//assets.pinterest.com/js/pinit_main.js\"});";

var pinterestBuild = function pinterestBuild() {
  if (typeof window.PinUtils !== "undefined" && window.PinUtils && typeof window.PinUtils.build === "function") {
    window.PinUtils.build();
  }
};

var onRouteUpdate = function onRouteUpdate() {
  if (document.querySelector(twttrClassNames) !== null) {
    if (!isTwttrScriptAdded) {
      (0, _utils.createScriptTag)(null, twttrEmbedScript);
      isTwttrScriptAdded = true;
    }
  }

  if (document.querySelector(instgrmClassNames) !== null) {
    if (!isInstgrmScriptAdded) {
      (0, _utils.createScriptTag)(instgrmEmbedUrl, null);
      isInstgrmScriptAdded = true;
    }
  }

  if (document.querySelector(flickrEmbedClassNames) !== null) {
    if (!isFlickrScriptAdded) {
      (0, _utils.createScriptTag)(flickrEmbedUrl, null);
      isFlickrScriptAdded = true;
    }
  }

  if (document.querySelector(pinterestEmbedClassNames) !== null) {
    if (!isPinterestScriptAdded) {
      (0, _utils.createScriptTag)(null, pinterestEmbedScript);
      isPinterestScriptAdded = true;
    }
  }

  pinterestBuild();
  twttrLoad();
  instgrmProcess();
};

exports.onRouteUpdate = onRouteUpdate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9nYXRzYnktYnJvd3Nlci5qcyJdLCJuYW1lcyI6WyJpc1R3dHRyU2NyaXB0QWRkZWQiLCJ0d3R0ckNsYXNzTmFtZXMiLCJqb2luIiwidHd0dHJFbWJlZFNjcmlwdCIsInR3dHRyTG9hZCIsIndpbmRvdyIsInR3dHRyIiwid2lkZ2V0cyIsImxvYWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaXNJbnN0Z3JtU2NyaXB0QWRkZWQiLCJpbnN0Z3JtQ2xhc3NOYW1lcyIsImluc3Rncm1FbWJlZFVybCIsImluc3Rncm1Qcm9jZXNzIiwiaW5zdGdybSIsIkVtYmVkcyIsInByb2Nlc3MiLCJpc0ZsaWNrclNjcmlwdEFkZGVkIiwiZmxpY2tyRW1iZWRDbGFzc05hbWVzIiwiZmxpY2tyRW1iZWRVcmwiLCJpc1BpbnRlcmVzdFNjcmlwdEFkZGVkIiwicGludGVyZXN0RW1iZWRDbGFzc05hbWVzIiwicGludGVyZXN0RW1iZWRTY3JpcHQiLCJwaW50ZXJlc3RCdWlsZCIsIlBpblV0aWxzIiwiYnVpbGQiLCJvblJvdXRlVXBkYXRlIiwicXVlcnlTZWxlY3RvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBLElBQUlBLGtCQUFrQixHQUFHLEtBQXpCO0FBQ0EsSUFBTUMsZUFBZSxHQUFHLHdIQU10QkMsSUFOc0IsS0FBeEI7QUFPQSxJQUFNQyxnQkFBZ0Isa1NBQXRCOztBQUlBLElBQU1DLFNBQVMsR0FBRyxTQUFaQSxTQUFZLEdBQU07QUFDdEIsTUFDRSxPQUFPQyxNQUFNLENBQUNDLEtBQWQsb0JBQ0FELE1BQU0sQ0FBQ0MsS0FBUCxDQUFhQyxPQURiLElBRUEsT0FBT0YsTUFBTSxDQUFDQyxLQUFQLENBQWFDLE9BQWIsQ0FBcUJDLElBQTVCLGVBSEYsRUFJRTtBQUNBSCxJQUFBQSxNQUFNLENBQUNDLEtBQVAsQ0FBYUMsT0FBYixDQUFxQkMsSUFBckIsQ0FBMEJDLFFBQVEsQ0FBQ0MsY0FBVCxhQUExQjtBQUNEO0FBQ0YsQ0FSRDs7QUFVQSxJQUFJQyxvQkFBb0IsR0FBRyxLQUEzQjtBQUNBLElBQU1DLGlCQUFpQixHQUFHLGtEQUd4QlYsSUFId0IsS0FBMUI7QUFJQSxJQUFNVyxlQUFlLHVDQUFyQjs7QUFFQSxJQUFNQyxjQUFjLEdBQUcsU0FBakJBLGNBQWlCLEdBQU07QUFDM0IsTUFDRSxPQUFPVCxNQUFNLENBQUNVLE9BQWQsb0JBQ0FWLE1BQU0sQ0FBQ1UsT0FBUCxDQUFlQyxNQURmLElBRUEsT0FBT1gsTUFBTSxDQUFDVSxPQUFQLENBQWVDLE1BQWYsQ0FBc0JDLE9BQTdCLGVBSEYsRUFJRTtBQUNBWixJQUFBQSxNQUFNLENBQUNVLE9BQVAsQ0FBZUMsTUFBZixDQUFzQkMsT0FBdEI7QUFDRDtBQUNGLENBUkQ7O0FBVUEsSUFBSUMsbUJBQW1CLEdBQUcsS0FBMUI7QUFDQSxJQUFNQyxxQkFBcUIsR0FBRyxzQkFBc0JqQixJQUF0QixLQUE5QjtBQUNBLElBQU1rQixjQUFjLG9EQUFwQjtBQUVBLElBQUlDLHNCQUFzQixHQUFHLEtBQTdCO0FBQ0EsSUFBTUMsd0JBQXdCLEdBQUcsbUVBSS9CcEIsSUFKK0IsS0FBakM7QUFLQSxJQUFNcUIsb0JBQW9CLG9YQUExQjs7QUFFQSxJQUFNQyxjQUFjLEdBQUcsU0FBakJBLGNBQWlCLEdBQU07QUFDM0IsTUFDRSxPQUFPbkIsTUFBTSxDQUFDb0IsUUFBZCxvQkFDQXBCLE1BQU0sQ0FBQ29CLFFBRFAsSUFFQSxPQUFPcEIsTUFBTSxDQUFDb0IsUUFBUCxDQUFnQkMsS0FBdkIsZUFIRixFQUlFO0FBQ0FyQixJQUFBQSxNQUFNLENBQUNvQixRQUFQLENBQWdCQyxLQUFoQjtBQUNEO0FBQ0YsQ0FSRDs7QUFVTyxJQUFNQyxhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLEdBQU07QUFDakMsTUFBSWxCLFFBQVEsQ0FBQ21CLGFBQVQsQ0FBdUIzQixlQUF2QixNQUE0QyxJQUFoRCxFQUFzRDtBQUNwRCxRQUFJLENBQUNELGtCQUFMLEVBQXlCO0FBQ3ZCLGtDQUFnQixJQUFoQixFQUFzQkcsZ0JBQXRCO0FBQ0FILE1BQUFBLGtCQUFrQixHQUFHLElBQXJCO0FBQ0Q7QUFDRjs7QUFFRCxNQUFJUyxRQUFRLENBQUNtQixhQUFULENBQXVCaEIsaUJBQXZCLE1BQThDLElBQWxELEVBQXdEO0FBQ3RELFFBQUksQ0FBQ0Qsb0JBQUwsRUFBMkI7QUFDekIsa0NBQWdCRSxlQUFoQixFQUFpQyxJQUFqQztBQUNBRixNQUFBQSxvQkFBb0IsR0FBRyxJQUF2QjtBQUNEO0FBQ0Y7O0FBRUQsTUFBSUYsUUFBUSxDQUFDbUIsYUFBVCxDQUF1QlQscUJBQXZCLE1BQWtELElBQXRELEVBQTREO0FBQzFELFFBQUksQ0FBQ0QsbUJBQUwsRUFBMEI7QUFDeEIsa0NBQWdCRSxjQUFoQixFQUFnQyxJQUFoQztBQUNBRixNQUFBQSxtQkFBbUIsR0FBRyxJQUF0QjtBQUNEO0FBQ0Y7O0FBRUQsTUFBSVQsUUFBUSxDQUFDbUIsYUFBVCxDQUF1Qk4sd0JBQXZCLE1BQXFELElBQXpELEVBQStEO0FBQzdELFFBQUksQ0FBQ0Qsc0JBQUwsRUFBNkI7QUFDM0Isa0NBQWdCLElBQWhCLEVBQXNCRSxvQkFBdEI7QUFDQUYsTUFBQUEsc0JBQXNCLEdBQUcsSUFBekI7QUFDRDtBQUNGOztBQUVERyxFQUFBQSxjQUFjO0FBQ2RwQixFQUFBQSxTQUFTO0FBQ1RVLEVBQUFBLGNBQWM7QUFDZixDQWhDTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNjcmlwdFRhZyB9IGZyb20gJy4vdXRpbHMnXG5leHBvcnQgeyB3cmFwUm9vdEVsZW1lbnQgfSBmcm9tICcuL3dyYXBSb290RWxlbWVudCdcblxubGV0IGlzVHd0dHJTY3JpcHRBZGRlZCA9IGZhbHNlXG5jb25zdCB0d3R0ckNsYXNzTmFtZXMgPSBbXG4gIGAudHdpdHRlci10d2VldGAsXG4gIGAudHdpdHRlci10aW1lbGluZWAsXG4gIGAudHdpdHRlci1mb2xsb3ctYnV0dG9uYCxcbiAgYC50d2l0dGVyLW1lbnRpb24tYnV0dG9uYCxcbiAgYC50d2l0dGVyLWhhc2h0YWctYnV0dG9uYFxuXS5qb2luKGAsYClcbmNvbnN0IHR3dHRyRW1iZWRTY3JpcHQgPSBgXG4hZnVuY3Rpb24oZCxzLGlkKXt2YXIganMsZmpzPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF0scD0vXmh0dHA6Ly50ZXN0KGQubG9jYXRpb24pPydodHRwJzonaHR0cHMnO2lmKCFkLmdldEVsZW1lbnRCeUlkKGlkKSl7anM9ZC5jcmVhdGVFbGVtZW50KHMpO2pzLmlkPWlkO2pzLnNyYz1wK1wiOi8vcGxhdGZvcm0udHdpdHRlci5jb20vd2lkZ2V0cy5qc1wiO2Zqcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqcyxmanMpO319KGRvY3VtZW50LFwic2NyaXB0XCIsXCJ0d2l0dGVyLXdqc1wiKVxuYFxuXG5jb25zdCB0d3R0ckxvYWQgPSAoKSA9PiB7XG4gIGlmIChcbiAgICB0eXBlb2Ygd2luZG93LnR3dHRyICE9PSBgdW5kZWZpbmVkYCAmJlxuICAgIHdpbmRvdy50d3R0ci53aWRnZXRzICYmXG4gICAgdHlwZW9mIHdpbmRvdy50d3R0ci53aWRnZXRzLmxvYWQgPT09IGBmdW5jdGlvbmBcbiAgKSB7XG4gICAgd2luZG93LnR3dHRyLndpZGdldHMubG9hZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgX19fZ2F0c2J5YCkpXG4gIH1cbn1cblxubGV0IGlzSW5zdGdybVNjcmlwdEFkZGVkID0gZmFsc2VcbmNvbnN0IGluc3Rncm1DbGFzc05hbWVzID0gW1xuICBgLmluc3RhZ3JhbS1tZWRpYWAsXG4gIGAuaW5zdGFncmFtLW1lZGlhLXJlbmRlcmVkYFxuXS5qb2luKGAsYClcbmNvbnN0IGluc3Rncm1FbWJlZFVybCA9IGBodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL2VtYmVkLmpzYFxuXG5jb25zdCBpbnN0Z3JtUHJvY2VzcyA9ICgpID0+IHtcbiAgaWYgKFxuICAgIHR5cGVvZiB3aW5kb3cuaW5zdGdybSAhPT0gYHVuZGVmaW5lZGAgJiZcbiAgICB3aW5kb3cuaW5zdGdybS5FbWJlZHMgJiZcbiAgICB0eXBlb2Ygd2luZG93Lmluc3Rncm0uRW1iZWRzLnByb2Nlc3MgPT09IGBmdW5jdGlvbmBcbiAgKSB7XG4gICAgd2luZG93Lmluc3Rncm0uRW1iZWRzLnByb2Nlc3MoKVxuICB9XG59XG5cbmxldCBpc0ZsaWNrclNjcmlwdEFkZGVkID0gZmFsc2VcbmNvbnN0IGZsaWNrckVtYmVkQ2xhc3NOYW1lcyA9IFtgLmZsaWNrci1lbWJlZC1tZHhgXS5qb2luKGAsYClcbmNvbnN0IGZsaWNrckVtYmVkVXJsID0gYGh0dHBzOi8vZW1iZWRyLmZsaWNrci5jb20vYXNzZXRzL2NsaWVudC1jb2RlLmpzYFxuXG5sZXQgaXNQaW50ZXJlc3RTY3JpcHRBZGRlZCA9IGZhbHNlXG5jb25zdCBwaW50ZXJlc3RFbWJlZENsYXNzTmFtZXMgPSBbXG4gIGAucGludGVyZXN0LXBpbmAsXG4gIGAucGludGVyZXN0LWJvYXJkYCxcbiAgYC5waW50ZXJlc3QtZm9sbG93LWJ1dHRvbmBcbl0uam9pbihgLGApXG5jb25zdCBwaW50ZXJlc3RFbWJlZFNjcmlwdCA9IGAhZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZjtkPVwiUElOX1wiK35+KChuZXcgRGF0ZSkuZ2V0VGltZSgpLzg2NGU1KSxhW2RdP2FbZF0rPTE6KGFbZF09MSxhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJTQ1JJUFRcIilbMF0sZj1iLmNyZWF0ZUVsZW1lbnQoXCJTQ1JJUFRcIiksZi50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIsZi5hc3luYz0hMCxmLnNyYz1jLm1haW5VcmwrXCI/XCIrTWF0aC5yYW5kb20oKSxlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsZSl9LDEwKSl9KHdpbmRvdyxkb2N1bWVudCx7bWFpblVybDpcIi8vYXNzZXRzLnBpbnRlcmVzdC5jb20vanMvcGluaXRfbWFpbi5qc1wifSk7YFxuXG5jb25zdCBwaW50ZXJlc3RCdWlsZCA9ICgpID0+IHtcbiAgaWYgKFxuICAgIHR5cGVvZiB3aW5kb3cuUGluVXRpbHMgIT09IGB1bmRlZmluZWRgICYmXG4gICAgd2luZG93LlBpblV0aWxzICYmXG4gICAgdHlwZW9mIHdpbmRvdy5QaW5VdGlscy5idWlsZCA9PT0gYGZ1bmN0aW9uYFxuICApIHtcbiAgICB3aW5kb3cuUGluVXRpbHMuYnVpbGQoKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBvblJvdXRlVXBkYXRlID0gKCkgPT4ge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0d3R0ckNsYXNzTmFtZXMpICE9PSBudWxsKSB7XG4gICAgaWYgKCFpc1R3dHRyU2NyaXB0QWRkZWQpIHtcbiAgICAgIGNyZWF0ZVNjcmlwdFRhZyhudWxsLCB0d3R0ckVtYmVkU2NyaXB0KVxuICAgICAgaXNUd3R0clNjcmlwdEFkZGVkID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGluc3Rncm1DbGFzc05hbWVzKSAhPT0gbnVsbCkge1xuICAgIGlmICghaXNJbnN0Z3JtU2NyaXB0QWRkZWQpIHtcbiAgICAgIGNyZWF0ZVNjcmlwdFRhZyhpbnN0Z3JtRW1iZWRVcmwsIG51bGwpXG4gICAgICBpc0luc3Rncm1TY3JpcHRBZGRlZCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihmbGlja3JFbWJlZENsYXNzTmFtZXMpICE9PSBudWxsKSB7XG4gICAgaWYgKCFpc0ZsaWNrclNjcmlwdEFkZGVkKSB7XG4gICAgICBjcmVhdGVTY3JpcHRUYWcoZmxpY2tyRW1iZWRVcmwsIG51bGwpXG4gICAgICBpc0ZsaWNrclNjcmlwdEFkZGVkID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBpbnRlcmVzdEVtYmVkQ2xhc3NOYW1lcykgIT09IG51bGwpIHtcbiAgICBpZiAoIWlzUGludGVyZXN0U2NyaXB0QWRkZWQpIHtcbiAgICAgIGNyZWF0ZVNjcmlwdFRhZyhudWxsLCBwaW50ZXJlc3RFbWJlZFNjcmlwdClcbiAgICAgIGlzUGludGVyZXN0U2NyaXB0QWRkZWQgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgcGludGVyZXN0QnVpbGQoKVxuICB0d3R0ckxvYWQoKVxuICBpbnN0Z3JtUHJvY2VzcygpXG59XG4iXX0=